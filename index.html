<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¢…èŠ±æ˜“æ•° - æ™ºæ–­ä¹¾å¤ä¸“ä¸šç‰ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Serif SC', serif; background-color: #f2efea; color: #2d2d2d; }
        .gua-line { height: 10px; width: 120px; margin: 6px auto; border-radius: 2px; position: relative; }
        .yang { background-color: #333; }
        .yin { display: flex; justify-content: space-between; background: transparent !important; }
        .yin::before, .yin::after { content: ''; height: 100%; width: 45%; background: #333; border-radius: 2px; }
        .active-yao { background-color: #b91c1c !important; box-shadow: 0 0 10px rgba(185, 28, 28, 0.4); }
        .yin.active-yao::before, .yin.active-yao::after { background: #b91c1c; }
        .card { background: rgba(255, 255, 255, 0.95); border: 1px solid #dcd7cf; }
        .section-header { border-left: 4px solid #333; padding-left: 12px; margin-bottom: 1rem; font-weight: bold; }
        .original-text { background-color: #2d2a26; color: #e5e1da; padding: 15px; border-radius: 8px; font-style: italic; }
    </style>
</head>
<body class="min-h-screen py-6 px-4">
    <div class="max-w-4xl mx-auto card p-6 md:p-10 rounded-lg shadow-2xl">
        <header class="text-center mb-10 border-b pb-6">
            <h1 class="text-4xl font-bold text-stone-800 mb-2">æ¢…èŠ±æ˜“æ•° Â· ä½“ç”¨æ–­æ³•</h1>
            <p class="text-stone-500 italic">è§‚è±¡èµ·å¦ Â· æ·±åº¦è§£æ</p>
        </header>
        
        <div class="bg-stone-50 p-6 rounded-xl border border-stone-200 mb-8">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <label class="block text-sm font-bold text-stone-600">æ‰€é—®ä½•äº‹</label>
                    <button onclick="randomGua()" class="text-xs text-amber-700 hover:text-amber-900 font-bold border border-amber-700 px-2 py-1 rounded transition">âœ¨ çµæ„Ÿéšæœºèµ·å¦</button>
                </div>
                <input id="question" type="text" placeholder="ä¾‹å¦‚ï¼šä»Šæ—¥è´¢è¿å¦‚ä½•ï¼Ÿ" class="w-full p-3 border border-stone-300 rounded focus:ring-2 focus:ring-stone-400 outline-none">
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                <div>
                    <label class="block text-xs font-bold text-stone-500 mb-2 text-center uppercase">ä¸Šå¦æ•°</label>
                    <input id="num1" type="number" class="w-full p-3 border rounded text-center outline-none focus:ring-2 focus:ring-stone-400" placeholder="1-999">
                </div>
                <div>
                    <label class="block text-xs font-bold text-stone-500 mb-2 text-center uppercase">ä¸‹å¦æ•°</label>
                    <input id="num2" type="number" class="w-full p-3 border rounded text-center outline-none focus:ring-2 focus:ring-stone-400" placeholder="1-999">
                </div>
                <div>
                    <label class="block text-xs font-bold text-stone-500 mb-2 text-center uppercase">åŠ¨çˆ»æ•°</label>
                    <input id="num3" type="number" class="w-full p-3 border rounded text-center outline-none focus:ring-2 focus:ring-stone-400" placeholder="1-999">
                </div>
            </div>
            <button onclick="calculate()" class="w-full bg-stone-800 text-white py-4 rounded font-bold hover:bg-black transition shadow-lg text-lg">
                æ¨ç®—å‰å‡¶
            </button>
        </div>

        <div id="result" class="hidden space-y-8">
            <div class="space-y-4">
                <div class="p-4 bg-stone-100 border-l-4 border-stone-800 rounded shadow-sm">
                    <span class="text-xs font-bold text-stone-500 uppercase block mb-1">æ‰€é—®ä¹‹äº‹ï¼š</span>
                    <p id="display-question" class="text-xl font-bold text-stone-800"></p>
                </div>
                <div class="p-6 bg-white border-2 border-stone-800 rounded-xl text-center shadow-inner">
                    <div id="luck-level" class="text-3xl font-bold mb-2 text-amber-800"></div>
                    <div id="luck-desc" class="text-stone-600"></div>
                </div>
            </div>

            <div class="p-6 bg-white border border-stone-200 rounded-xl shadow-sm">
                <h4 class="section-header text-xl text-stone-800">å¦è¾æ·±åº¦è§£æ</h4>
                
                <div class="mb-6">
                    <p class="text-xs font-bold text-stone-400 mb-2 uppercase tracking-widest">ã€ä¸»å¦åŸæ–‡ã€‘</p>
                    <div id="main-original" class="original-text mb-4 text-lg"></div>
                    <p class="text-xs font-bold text-amber-800 bg-amber-50 px-2 py-1 inline-block rounded mb-2">ç°ä»£æ–‡è§£æ</p>
                    <p id="main-modern" class="text-base leading-relaxed text-stone-700"></p>
                </div>

                <hr class="my-6 border-stone-100">

                <div>
                    <p class="text-xs font-bold text-stone-400 mb-2 uppercase tracking-widest">ã€å˜å¦è¶‹å‘ã€‘</p>
                    <p id="change-modern" class="text-base leading-relaxed text-stone-700"></p>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8">
                <div class="text-center p-6 border rounded-xl bg-white">
                    <h3 id="main-title" class="text-stone-400 text-xs mb-4 uppercase">ã€ä¸»å¦ã€‘</h3>
                    <div id="main-gua-graph" class="py-4"></div>
                    <p id="main-gua-name" class="text-2xl font-bold text-stone-800 mt-2"></p>
                    <p id="main-gua-elements" class="text-sm text-stone-500 mt-1"></p>
                </div>
                <div class="text-center p-6 border rounded-xl bg-white">
                    <h3 id="change-title" class="text-stone-400 text-xs mb-4 uppercase">ã€å˜å¦ã€‘</h3>
                    <div id="change-gua-graph" class="py-4"></div>
                    <p id="change-gua-name" class="text-2xl font-bold text-stone-800 mt-2"></p>
                </div>
            </div>

            <div class="p-6 bg-stone-50 border border-stone-200 rounded-xl">
                <h4 class="section-header text-stone-800 mb-4">æ˜“å­¦è®²å ‚ Â· ä½“ç”¨åŸç†</h4>
                <div class="grid md:grid-cols-2 gap-8 text-sm">
                    <div class="text-stone-600 leading-relaxed">
                        <p class="font-bold mb-2">ä½“ç”¨å…³ç³»åˆ¤å®šç»“æœï¼š</p>
                        <div class="p-4 bg-stone-800 text-stone-100 rounded mb-4" id="analysis-tiyong"></div>
                        <p><strong>è¯´æ˜ï¼š</strong>åŠ¨çˆ»åœ¨å“ªä¸ªå¦ï¼Œå“ªä¸ªå¦å°±æ˜¯â€œç”¨â€ï¼ˆä»£è¡¨äº‹ï¼‰ï¼›ä¸åŠ¨çš„å¦ä¸ºâ€œä½“â€ï¼ˆä»£è¡¨æˆ‘ï¼‰ã€‚é€šè¿‡ä¸¤è€…äº”è¡Œç”Ÿå…‹å®šå‰å‡¶ã€‚</p>
                    </div>
                    <div class="bg-white p-4 rounded border border-stone-200">
                        <p class="font-bold mb-2 text-stone-700 text-xs">å¿«é€Ÿå‚è€ƒï¼š</p>
                        <ul class="text-xs space-y-1">
                            <li>ğŸŸ¢ ç”¨ç”Ÿä½“ï¼šå¤§å‰ï¼Œè´µäººç›¸åŠ©</li>
                            <li>ğŸŸ¡ ä½“ç”¨æ¯”å’Œï¼šä¸­å‰ï¼Œè¯¸äº‹å¹³é¡º</li>
                            <li>ğŸ”µ ä½“å…‹ç”¨ï¼šå°å‰ï¼ŒåŠ³è€Œæœ‰è·</li>
                            <li>ğŸŸ  ä½“ç”Ÿç”¨ï¼šå°å‡¶ï¼Œæ³„æ°”æŸè€—</li>
                            <li>ğŸ”´ ç”¨å…‹ä½“ï¼šå¤§å‡¶ï¼Œå‹åŠ›å—é˜»</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const baguaData = {
            1: { name: "ä¹¾", symbol: [1, 1, 1], element: "é‡‘" },
            2: { name: "å…‘", symbol: [1, 1, 0], element: "é‡‘" },
            3: { name: "ç¦»", symbol: [1, 0, 1], element: "ç«" },
            4: { name: "éœ‡", symbol: [1, 0, 0], element: "æœ¨" },
            5: { name: "å·½", symbol: [0, 1, 1], element: "æœ¨" },
            6: { name: "å", symbol: [0, 1, 0], element: "æ°´" },
            7: { name: "è‰®", symbol: [0, 0, 1], element: "åœŸ" },
            8: { name: "å¤", symbol: [0, 0, 0], element: "åœŸ" }
        };
        const gua64Database = {
  "11": { "name": "ä¹¾ä¸ºå¤©", "original": "å…ƒï¼Œäº¨ï¼Œåˆ©ï¼Œè´ã€‚", "modern": "äº‹ä¸šå¦‚æ—¥ä¸­å¤©ï¼Œå…·å¤‡å¤§å‘å±•çš„æ¡ä»¶ã€‚ä½†éœ€è­¦æƒ•â€œäº¢é¾™æœ‰æ‚”â€ï¼ŒåŠ¡å¿…ä¿æŒè™šå¿ƒï¼Œä¸å¯åˆšæ„è‡ªç”¨ã€‚" },
  "88": { "name": "å¤ä¸ºåœ°", "original": "å…ƒï¼Œäº¨ï¼Œåˆ©ç‰é©¬ä¹‹è´ã€‚", "modern": "æ­¤æ—¶å®œå®ˆä¸å®œè¿›ï¼Œåº”é¡ºåº”è‡ªç„¶ã€‚å¤šå¬å–ä»–äººæ„è§ï¼Œä»¥æŸ”å…‹åˆšï¼Œåšå¾·è½½ç‰©æ–¹èƒ½æˆåŠŸã€‚" },
  "61": { "name": "æ°´å¤©éœ€", "original": "æœ‰å­šï¼Œå…‰äº¨ï¼Œè´å‰ã€‚åˆ©æ¶‰å¤§å·ã€‚", "modern": "æ—¶æœºå°šæœªæˆç†Ÿï¼Œéœ€è€å¿ƒç­‰å¾…ã€‚è™½ç„¶å¿ƒä¸­ç„¦æ€¥ï¼Œä½†å®ˆæ­£ç­‰å¾…ç»ˆä¼šæœ‰å¥½ç»“æœã€‚" },
  "16": { "name": "å¤©æ°´è®¼", "original": "æœ‰å­šï¼Œçª’æƒ•ï¼Œä¸­å‰ï¼Œç»ˆå‡¶ã€‚", "modern": "å®¹æ˜“å‘ç”Ÿäº‰æ‰§æˆ–æ³•å¾‹çº çº·ã€‚å³ä¾¿ä½ æœ‰ç†ï¼Œä¹Ÿå»ºè®®å¾—é¥¶äººå¤„ä¸”é¥¶äººï¼Œå’Œè§£ä¸ºä¸Šï¼Œäº‰æ–—å¿…æœ‰æŸå¤±ã€‚" },
  "87": { "name": "åœ°å±±è°¦", "original": "äº¨ï¼Œå›å­æœ‰ç»ˆã€‚", "modern": "è°¦è™šå—ç›Šã€‚ç›®å‰å½¢åŠ¿å¯¹ä½ æœ‰åˆ©ï¼Œä½†è¶Šæ˜¯æˆåŠŸè¶Šè¦ä½è°ƒï¼Œè¿™æ ·æ‰èƒ½è·å¾—é•¿ä¹…çš„å¹³å®‰å’Œæ”¯æŒã€‚" },
  "33": { "name": "ç¦»ä¸ºç«", "original": "åˆ©è´ï¼Œäº¨ã€‚ç•œç‰ç‰›ï¼Œå‰ã€‚", "modern": "å…‰æ˜ç£Šè½ï¼Œäº‹ä¸šé¡ºåˆ©ã€‚è¦åƒç«ä¸€æ ·ä¾é™„äºæ­£é“ï¼Œæ³¨æ„å¤„ç†å¥½äººé™…å…³ç³»ï¼Œä¸å¯è¿‡äºæ€¥èºã€‚" },
  "66": { "name": "åä¸ºæ°´", "original": "ä¹ åï¼Œæœ‰å­šï¼Œç»´å¿ƒäº¨ï¼Œè¡Œæœ‰å°šã€‚", "modern": "æ­£å¤„äºå›°éš¾æ—¶æœŸï¼Œé™©è±¡ç¯ç”Ÿã€‚éœ€ä¿æŒå†…å¿ƒçš„è¯šä¿¡ä¸åšå®šï¼Œåƒæ°´ä¸€æ ·æŒä¹‹ä»¥æ’ï¼Œç»ˆèƒ½è„±é™©ã€‚" },
  "22": { "name": "å…‘ä¸ºæ³½", "original": "äº¨ï¼Œåˆ©è´ã€‚", "modern": "å–œæ‚¦äº¤æµã€‚é€‚åˆå›¢é˜Ÿåˆä½œã€å•†åŠ¡æ´½è°ˆã€‚æ³¨æ„è¨€å¤šå¿…å¤±ï¼Œä¸è¦å› ä¸ºæš‚æ—¶çš„å¿«ä¹è€Œæ”¾æ¾è­¦æƒ•ã€‚" },
  "44": { "name": "éœ‡ä¸ºé›·", "original": "äº¨ã€‚éœ‡æ¥è™©è™©ï¼Œç¬‘è¨€å“‘å“‘ã€‚", "modern": "ä¼šé¢ä¸´çªå¦‚å…¶æ¥çš„å˜åŠ¨æˆ–éœ‡æƒŠï¼Œä½†åªè¦å†…å¿ƒä¸ä¹±ï¼Œè¿™åªæ˜¯è™šæƒŠä¸€åœºï¼Œåè€Œèƒ½å¸¦æ¥åæ€ä¸è¿›æ­¥ã€‚" },
  "55": { "name": "å·½ä¸ºé£", "original": "å°äº¨ï¼Œåˆ©æ”¸å¾€ï¼Œåˆ©è§å¤§äººã€‚", "modern": "é¡ºé£é¡ºæ°´ï¼Œé€‚åˆè¿›è¡Œå°è§„æ¨¡çš„è°ƒæ•´æˆ–æ¸—é€ã€‚å»ºè®®å¯»æ±‚é•¿è¾ˆæˆ–ä¸“ä¸šäººå£«çš„æŒ‡å¯¼ï¼Œä¸å®œç‹¬æ–­ã€‚" },
  "77": { "name": "è‰®ä¸ºå±±", "original": "è‰®å…¶èƒŒï¼Œä¸è·å…¶èº«ï¼Œè¡Œå…¶åº­ï¼Œä¸è§å…¶äººï¼Œæ— å’ã€‚", "modern": "æ­¢æ­¥ä¸å‰ã€‚ç›®å‰ä¸é€‚åˆè¡ŒåŠ¨ï¼Œåº”é™ä¸‹å¿ƒæ¥åæ€ã€‚è¯¥åœæ­¢çš„æ—¶å€™æœæ–­åœæ­¢ï¼Œæ‰æ˜¯æœ€é«˜æ˜çš„å¢ƒç•Œã€‚" },
  "12": { "name": "å¤©æ³½å±¥", "original": "å±¥è™å°¾ï¼Œä¸å’¥äººï¼Œäº¨ã€‚", "modern": "å¦‚å±¥è–„å†°ã€‚è™½ç„¶å¤„å¢ƒæœ‰äº›å±é™©ï¼Œä½†åªè¦ç¤¼è²Œå¾…äººã€éµå¾ªè§„çŸ©ï¼Œå°±èƒ½åŒ–é™©ä¸ºå¤·ã€‚" },
  "13": { "name": "å¤©ç«åŒäºº", "original": "åŒäººäºé‡ï¼Œäº¨ã€‚åˆ©æ¶‰å¤§å·ã€‚", "modern": "é€‚åˆä¸äººåˆä½œã€‚èµ°å‡ºé—¨å»ç»“äº¤æœ‹å‹ï¼Œé›†æ€å¹¿ç›Šï¼Œå…±åŒå®Œæˆå¤§äº‹ä¸šï¼Œä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ”¶è·ã€‚" },
  "14": { "name": "å¤©é›·æ— å¦„", "original": "å…ƒï¼Œäº¨ï¼Œåˆ©ï¼Œè´ã€‚å…¶åŒªæ­£æœ‰çœšã€‚", "modern": "éµå¾ªè‡ªç„¶è§„å¾‹ï¼Œä¸è¦æœ‰éåˆ†ä¹‹æƒ³ã€‚åªè¦è¡Œäº‹æ­£å½“ï¼Œå°±ä¼šå¥½è¿ï¼›å¦‚æœæŠ•æœºå–å·§ï¼Œå¿…é­ç¾ç¥¸ã€‚" },
  "15": { "name": "å¤©é£å§¤", "original": "å§¤ï¼Œå¥³å£®ï¼Œå‹¿ç”¨å–å¥³ã€‚", "modern": "ä¸æœŸè€Œé‡ã€‚ä¼šé‡åˆ°çªå‘æƒ…å†µæˆ–ä¸å¯»å¸¸çš„äººï¼Œè¦è­¦æƒ•é˜´æŸ”åŠ›é‡çš„æ¸—é€ï¼Œä¸å¯å› ä¸€æ—¶è¯±æƒ‘è€Œè‰ç‡å†³å®šã€‚" },
  "17": { "name": "å¤©å±±é", "original": "äº¨ï¼Œå°åˆ©è´ã€‚", "modern": "æ—¶è¿é€€é¿ã€‚ç›®å‰å½¢åŠ¿ä¸åˆ©äºè¿›æ”»ï¼Œåº”å½“æœæ–­é€€å®ˆï¼Œä¿å­˜å®åŠ›ï¼Œç­‰å¾…æ—¶æœºåå¼¹ã€‚" },
  "18": { "name": "å¤©åœ°å¦", "original": "å¦ä¹‹åŒªäººï¼Œä¸åˆ©å›å­è´ã€‚", "modern": "é—­å¡ä¸é€šã€‚ä¸Šä¸‹ä¸å’Œï¼Œæ²Ÿé€šå—é˜»ã€‚æ­¤æ—¶åº”æ·±å±…ç®€å‡ºï¼Œä¸å®œæ±‚èŒæˆ–å¤§è§„æ¨¡æŠ•èµ„ã€‚" },
  "81": { "name": "åœ°å¤©æ³°", "original": "å°å¾€å¤§æ¥ï¼Œå‰äº¨ã€‚", "modern": "ä¸‰é˜³å¼€æ³°ã€‚æ²Ÿé€šé¡ºç•…ï¼Œäº‹ä¸šè¿›å…¥ç¨³å®šä¸Šå‡æœŸï¼Œæ˜¯å¼€å±•è®¡åˆ’ã€å¢åŠ æŠ•å…¥çš„å¤§å¥½æ—¶æœºã€‚" },
  "21": { "name": "æ³½å¤©å¤¬", "original": "æ‰¬äºç‹åº­ï¼Œå­šå·ï¼Œæœ‰å‰ã€‚", "modern": "å†³æ–­ä¹‹æ—¶ã€‚è™½ç„¶ä¼˜åŠ¿åœ¨ä½ ï¼Œä½†å¤„ç†é—®é¢˜ä¸å¯è¿‡æ¿€ï¼Œè¦é˜²å¤‡å°äººå›°å…½çŠ¹æ–—ï¼Œéœ€æœ‰å‘¨å¯†çš„è®¡åˆ’ã€‚" },
  "31": { "name": "ç«å¤©å¤§æœ‰", "original": "å…ƒäº¨ã€‚", "modern": "å¤§è·ä¸°æ”¶ã€‚ç›®å‰è´¢è¿æˆ–äº‹ä¸šè¿æä½³ï¼Œä½†è¦è®°ä½â€œæ»¡æ‹›æŸâ€ï¼Œå¤šåšå–„äº‹ï¼Œæ‰èƒ½é•¿ä¹…æŒæœ‰è´¢å¯Œã€‚" },
  "41": { "name": "é›·å¤©å¤§å£®", "original": "åˆ©è´ã€‚", "modern": "å£°åŠ¿æµ©å¤§ï¼ŒåŠ›é‡å¼ºåŠ²ã€‚æ³¨æ„ä¸è¦å‡­æƒåŠ›é‡è€Œé²è½è¡Œäº‹ï¼Œå¦åˆ™ä¼šé™·å…¥åƒµå±€ï¼ˆç¾ç¾Šè§¦è—©ï¼‰ã€‚" },
  "51": { "name": "é£å¤©å°ç•œ", "original": "äº¨ã€‚å¯†äº‘ä¸é›¨ï¼Œè‡ªæˆ‘è¥¿éƒŠã€‚", "modern": "åŠ›é‡å°šè–„å¼±ï¼Œè™½ç„¶æœ‰æƒ³æ³•ä½†æ¡ä»¶ä¸å®Œå…¨æˆç†Ÿã€‚é€‚åˆç§¯ç´¯èµ„é‡‘å’Œäººè„‰ï¼Œä¸å®œæ“ä¹‹è¿‡æ€¥ã€‚" },
  "71": { "name": "å±±å¤©å¤§ç•œ", "original": "åˆ©è´ï¼Œä¸å®¶é£Ÿå‰ï¼Œåˆ©æ¶‰å¤§å·ã€‚", "modern": "å¤§æœ‰ç§¯è“„ã€‚ä¸ä»…æ˜¯é‡‘é’±ï¼Œæ›´æŒ‡å­¦è¯†ä¸äººæ‰ã€‚é€‚åˆè¿œè¡Œã€æ±‚èŒæˆ–å¯åŠ¨é‡å¤§é¡¹ç›®ã€‚" },
  "28": { "name": "æ³½åœ°èƒ", "original": "äº¨ã€‚ç‹å‡æœ‰åº™ï¼Œåˆ©è§å¤§äººã€‚", "modern": "äººæ‰èšé›†ã€‚é€‚åˆå‚åŠ è¡Œä¸šä¼šè®®ã€èšä¼šï¼Œé€šè¿‡ç¤¾äº¤æ´»åŠ¨èƒ½é‡åˆ°è´µäººï¼Œåˆ©äºå›¢é˜Ÿå»ºè®¾ã€‚" },
  "38": { "name": "ç«åœ°æ™‹", "original": "åº·ä¾¯ç”¨é”¡é©¬è•ƒåº¶ï¼Œæ˜¼æ—¥ä¸‰æ¥ã€‚", "modern": "åŠ å®˜è¿›çˆµã€‚ä½ çš„è¡¨ç°å¾—åˆ°äº†ä¸Šçº§çš„è®¤å¯ï¼Œæ™‹å‡æœºä¼šå°±åœ¨çœ¼å‰ï¼Œå®œè¡¨ç°ç§¯æï¼Œå¤§èƒ†å±•ç°æ‰åã€‚" },
  "48": { "name": "é›·åœ°è±«", "original": "åˆ©å»ºä¾¯è¡Œå¸ˆã€‚", "modern": "å–œæ‚¦é¡ºéšã€‚é€‚åˆåˆ¶å®šé•¿è¿œè®¡åˆ’æˆ–è¿›è¡Œå¨±ä¹ç›¸å…³çš„æŠ•èµ„ã€‚æ³¨æ„ä¸è¦æ²‰æººäºå®‰é€¸è€Œä¸§å¤±æ–—å¿—ã€‚" },
  "58": { "name": "é£åœ°è§‚", "original": "ç›¥è€Œä¸èï¼Œæœ‰å­šé¢™è‹¥ã€‚", "modern": "è§‚å¯Ÿä¸åæ€ã€‚æ­¤æ—¶ä¸å®œåŠ¨ï¼Œåº”å¤šçœ‹ã€å¤šå­¦ã€‚é€šè¿‡è§‚å¯Ÿå±€åŠ¿ï¼Œä½ èƒ½å‘ç°åˆ«äººçœ‹ä¸è§çš„æœºé‡ã€‚" },
  "68": { "name": "æ°´åœ°æ¯”", "original": "å‰ã€‚åŸç­®å…ƒæ°¸è´ï¼Œæ— å’ã€‚", "modern": "äº²è¿‘ä¾é™„ã€‚å¯»æ‰¾å¯é çš„åˆä½œä¼™ä¼´æˆ–å¹³å°ã€‚è¯šä¿¡æ˜¯åˆä½œçš„åŸºç¡€ï¼Œé€‰å¯¹é˜µè¥è‡³å…³é‡è¦ã€‚" },
  "78": { "name": "å±±åœ°å‰¥", "original": "ä¸åˆ©æœ‰æ”¸å¾€ã€‚", "modern": "å½¢åŠ¿ä¸¥å³»ï¼Œå°äººå¾—åŠ¿ã€‚ä½ çš„æ ¹åŸºå—åˆ°å¨èƒï¼Œä¸å®œè¿›è¡Œä»»ä½•æ–°è®¡åˆ’ï¼Œåº”éšå¿ä»¥å¾…ï¼Œä¿å…¨è‡ªæˆ‘ã€‚" },
  "23": { "name": "æ³½ç«é©", "original": "å·±æ—¥ä¹ƒå­šï¼Œå…ƒäº¨åˆ©è´ï¼Œæ‚”äº¡ã€‚", "modern": "å˜é©ä¹‹æ—¶ã€‚æ—§çš„æ¨¡å¼å·²èµ°å…¥æ­»èƒ¡åŒï¼Œå¿…é¡»å¤§èƒ†åˆ›æ–°ã€æ”¹å˜ç°çŠ¶ã€‚è™½ç„¶å¼€å§‹æœ‰é˜µç—›ï¼Œä½†ç»“æœå¤§å‰ã€‚" },
  "24": { "name": "æ³½é›·éš", "original": "å…ƒäº¨åˆ©è´ï¼Œæ— å’ã€‚", "modern": "éšæœºåº”å˜ã€‚ä¸è¦æ­»å®ˆå·±è§ï¼Œè·Ÿç€æ—¶åŠ¿æˆ–å¼ºè€…çš„è„šæ­¥èµ°ï¼Œé¡ºåŠ¿è€Œä¸ºèƒ½çœåŠ›ä¸”æˆåŠŸã€‚" },
  "25": { "name": "æ³½é£å¤§è¿‡", "original": "æ ‹æŒ ï¼Œåˆ©æœ‰æ”¸å¾€ï¼Œäº¨ã€‚", "modern": "å‹åŠ›å·¨å¤§ï¼Œè´Ÿæ‹…è¿‡é‡ã€‚è™½ç„¶ç›®å‰æƒ…å†µæœ‰äº›å¤±å»å¹³è¡¡ï¼Œä½†åªè¦è¡ŒåŠ¨æœæ–­ï¼Œå°±èƒ½çªç ´é‡å›´ã€‚" },
  "26": { "name": "æ³½æ°´å›°", "original": "äº¨ï¼Œè´ï¼Œå¤§äººå‰ï¼Œæ— å’ã€‚", "modern": "èº«å¤„å›°å¢ƒã€‚é’±è´¢æˆ–è¨€è¯­å—åˆ°é™åˆ¶ï¼Œä½†è¿™æ˜¯ç£¨ç»ƒå¿ƒæ€§çš„å¥½æœºä¼šã€‚ä¿æŒä¿¡å¿ƒï¼Œå›°å¢ƒå¾ˆå¿«ä¼šè¿‡å»ã€‚" },
  "27": { "name": "æ³½å±±å’¸", "original": "äº¨ï¼Œåˆ©è´ï¼Œå–å¥³å‰ã€‚", "modern": "æ„Ÿåº”äº¤æµã€‚æ„Ÿæƒ…è¿æä½³ï¼Œäº‹ä¸šä¸Šä¹Ÿå®¹æ˜“è·å¾—ä»–äººçš„å…±é¸£å’Œæ”¯æŒï¼Œå‡­ç›´è§‰è¡Œäº‹å¾€å¾€æ˜¯å¯¹çš„ã€‚" },
  "32": { "name": "ç«æ³½ç½", "original": "å°äº‹å‰ã€‚", "modern": "èƒŒé“è€Œé©°ã€‚å›¢é˜Ÿå†…éƒ¨å¯èƒ½å‡ºç°åˆ†æ­§ã€‚æ­¤æ—¶ä¸é€‚åˆåšå¤§å†³ç­–ï¼Œåªèƒ½æ±‚åŒå­˜å¼‚ï¼Œå¤„ç†ä¸€äº›çäº‹ã€‚" },
  "34": { "name": "ç«é›·å™¬å—‘", "original": "äº¨ã€‚åˆ©ç”¨ç‹±ã€‚", "modern": "æ’é™¤éšœç¢ã€‚æœ‰é˜»åŠ›å¹²æ‰°ï¼Œéœ€è¦åƒå’¬ç¢ç¡¬ç‰©ä¸€æ ·æœæ–­å¤„ç†æ‰éšœç¢ã€‚æ³•å¾‹æ‰‹æ®µæˆ–ä¸¥å‰çš„è§„ç« æ˜¯æœ‰æ•ˆçš„ã€‚" },
  "35": { "name": "ç«é£é¼", "original": "å…ƒå‰ï¼Œäº¨ã€‚", "modern": "é©æ•…é¼æ–°ã€‚äº‹ä¸šè¿›å…¥ç¨³å›ºä¸”é«˜æ°´å¹³å‘å±•çš„é˜¶æ®µã€‚é€‚åˆæ ‘ç«‹ä¸ªäººå“ç‰Œæˆ–ç¡®ç«‹æ–°çš„é¢†å¯¼åœ°ä½ã€‚" },
  "36": { "name": "ç«æ°´æœªæµ", "original": "äº¨ï¼Œå°ç‹æ±”æµï¼Œæ¿¡å…¶å°¾ï¼Œæ— æ”¸åˆ©ã€‚", "modern": "äº‹æœªå®Œæˆã€‚è™½ç„¶æ¥è¿‘æˆåŠŸï¼Œä½†æœ€åå…³å¤´æœ€å®¹æ˜“å‡ºé”™ã€‚éœ€åŠ å€å°å¿ƒï¼Œæ…ç»ˆå¦‚å§‹ã€‚" },
  "37": { "name": "ç«å±±æ—…", "original": "å°äº¨ï¼Œæ—…è´å‰ã€‚", "modern": "ä¸å®‰å®šçŠ¶æ€ã€‚é€‚åˆå‡ºå·®ã€å¤–æ´¾æˆ–å‰¯ä¸šã€‚è™½ç„¶ç›®å‰æ²¡æœ‰å½’å±æ„Ÿï¼Œä½†åªè¦å®‰å®ˆæœ¬åˆ†ï¼Œå°äº‹å¯æˆã€‚" },
  "42": { "name": "é›·æ³½å½’å¦¹", "original": "å¾å‡¶ï¼Œæ— æ”¸åˆ©ã€‚", "modern": "é¡ºåºæ··ä¹±ã€‚ç›®å‰çš„æˆåŠŸå¯èƒ½å»ºç«‹åœ¨ä¸æ­£å½“çš„åŸºç¡€ä¸Šã€‚ä¸è¦è¢«çœ¼å‰çš„åˆ©ç›Šè¯±æƒ‘ï¼Œé•¿è¿œæ¥çœ‹å¹¶ä¸ä¹è§‚ã€‚" },
  "43": { "name": "é›·ç«ä¸°", "original": "äº¨ï¼Œç‹å‡ä¹‹ï¼Œå‹¿å¿§ï¼Œå®œæ—¥ä¸­ã€‚", "modern": "é¼ç››æ—¶æœŸã€‚è´¢å¯Œä¸åå£°è¾¾åˆ°é¡¶å³°ã€‚ä½†è¦é˜²å¤‡æ—¥ä¸­åˆ™æ˜ƒï¼Œåœ¨æœ€å¥½çš„æ—¶å€™è¦è€ƒè™‘æœªæ¥çš„é€€è·¯ã€‚" },
  "45": { "name": "é›·é£æ’", "original": "äº¨ï¼Œæ— å’ï¼Œåˆ©è´ï¼Œåˆ©æœ‰æ”¸å¾€ã€‚", "modern": "æŒä¹‹ä»¥æ’ã€‚äº‹ä¸šç¨³å®šï¼Œä¸éœ€è¦å¤§çš„æ”¹åŠ¨ã€‚åªè¦åšæŒæ—¢å®šæ–¹é’ˆï¼Œå°±èƒ½è·å¾—é•¿æœŸçš„æˆåŠŸã€‚" },
  "46": { "name": "é›·æ°´è§£", "original": "åˆ©è¥¿å—ï¼Œæ— æ‰€å¾€ï¼Œå…¶æ¥å¤å‰ã€‚", "modern": "å¿§è™‘è§£é™¤ã€‚å›°éš¾æ­£åœ¨æ¶ˆæ•£ï¼Œä¹‹å‰çš„è¯¯ä¼šæˆ–å‹åŠ›å°†å¾—åˆ°é‡Šæ”¾ã€‚é€‚åˆèµ¦å…ä»–äººï¼Œè½»è£…ä¸Šé˜µã€‚" },
  "47": { "name": "é›·å±±å°è¿‡", "original": "äº¨ï¼Œåˆ©è´ï¼Œå¯å°äº‹ï¼Œä¸å¯å¤§äº‹ã€‚", "modern": "ç¨å¾®è¿‡åº¦ã€‚ç›®å‰çš„å½¢åŠ¿ä¸é€‚åˆå¤§å¼ æ——é¼“ï¼Œå¯ä»¥åšäº›ç»†å¾®çš„ä¿®è¡¥å·¥ä½œã€‚ä¿æŒä½è°ƒï¼Œåƒå°é¸Ÿé£è¡Œä¸€æ ·ã€‚" },
  "52": { "name": "é£æ³½ä¸­å­š", "original": "è±šé±¼å‰ï¼Œåˆ©æ¶‰å¤§å·ï¼Œåˆ©è´ã€‚", "modern": "è¯šå®å®ˆä¿¡ã€‚å†…å¿ƒçš„çœŸè¯šèƒ½æ‰“åŠ¨ä»–äººï¼Œç”šè‡³èƒ½æ„ŸåŒ–å¯¹æ‰‹ã€‚é€‚åˆè°ˆåˆ¤ã€ç­¾çº¦å’Œæ·±åº¦äº¤æµã€‚" },
  "53": { "name": "é£ç«å®¶äºº", "original": "åˆ©å¥³è´ã€‚", "modern": "ä¿®èº«é½å®¶ã€‚é‡ç‚¹åº”æ”¾åœ¨å†…éƒ¨ç®¡ç†ã€å›¢é˜Ÿå»ºè®¾æˆ–å®¶åº­å…³ç³»ä¸Šã€‚å†…ç¨³æ‰èƒ½å¤–é¡ºã€‚" },
  "54": { "name": "é£é›·ç›Š", "original": "åˆ©æœ‰æ”¸å¾€ï¼Œåˆ©æ¶‰å¤§å·ã€‚", "modern": "å¢ç›Šå—åŠ©ã€‚è¿åŠ¿ä¸Šæ‰¬ï¼Œé€‚åˆç§¯æè¿›å–ï¼Œå¼€å±•æ–°ä¸šåŠ¡ã€‚æ­¤æ—¶ä¼šæœ‰è´µäººç›¸åŠ©ï¼Œäº‹åŠåŠŸå€ã€‚" },
  "56": { "name": "é£æ°´æ¶£", "original": "äº¨ã€‚ç‹å‡æœ‰åº™ï¼Œåˆ©æ¶‰å¤§å·ã€‚", "modern": "æ•£å¼€ä¸åŒ–è§£ã€‚è™½ç„¶æœ‰æ¶£æ•£ä¹‹è±¡ï¼Œä½†é€šè¿‡å»ºç«‹å…±åŒä¿¡å¿µï¼ˆå¦‚ä¼ä¸šæ–‡åŒ–ï¼‰å¯ä»¥é‡æ–°å‡èšäººå¿ƒï¼Œè½¬å±ä¸ºå®‰ã€‚" },
  "57": { "name": "é£å±±æ¸", "original": "å¥³å½’å‰ï¼Œåˆ©è´ã€‚", "modern": "å¾ªåºæ¸è¿›ã€‚äº‹ä¸šåƒæ ‘æœ¨åœ¨å±±ä¸Šç”Ÿé•¿ä¸€æ ·ç¼“æ…¢è€Œæ‰å®ã€‚ä¸è¦æ€¥åŠŸè¿‘åˆ©ï¼ŒæŒ‰éƒ¨å°±ç­å¿…æœ‰å¤§æˆã€‚" },
  "62": { "name": "æ°´æ³½èŠ‚", "original": "äº¨ã€‚è‹¦èŠ‚ä¸å¯è´ã€‚", "modern": "èŠ‚åˆ¶ä¹‹é“ã€‚éœ€è¦åˆ¶å®šè§„åˆ™æˆ–èŠ‚çº¦å¼€æ”¯ã€‚ä½†è¦æ³¨æ„åº¦ï¼Œè¿‡åˆ†è‹›åˆ»çš„èŠ‚åˆ¶ä¼šå¯¼è‡´å†…éƒ¨åå¼¹ã€‚" },
  "63": { "name": "æ°´ç«æ—¢æµ", "original": "äº¨ï¼Œå°åˆ©è´ã€‚åˆå‰ï¼Œç»ˆä¹±ã€‚", "modern": "å¤§åŠŸå‘Šæˆã€‚äº‹æƒ…å·²ç»è¾¾åˆ°ç†æƒ³çŠ¶æ€ã€‚æ­¤æ—¶æœ€å±é™©çš„æ˜¯æ¾æ‡ˆï¼Œå¿…é¡»ä¸¥é˜²æ­»å®ˆï¼Œé˜²æ­¢æ»‘å¡ã€‚" },
  "64": { "name": "æ°´é›·å±¯", "original": "å…ƒäº¨åˆ©è´ã€‚å‹¿ç”¨æœ‰æ”¸å¾€ï¼Œåˆ©å»ºä¾¯ã€‚", "modern": "åˆ›ä¸šè‰°éš¾ã€‚åƒç§å­ç ´åœŸä¸€æ ·å……æ»¡é˜»åŠ›ï¼Œä¸å®œè½»ä¸¾å¦„åŠ¨ã€‚åº”å…ˆç†æ¸…å¤´ç»ªï¼Œå¯»æ±‚å¸®æ‰‹ã€‚" },
  "65": { "name": "æ°´é£äº•", "original": "æ”¹é‚‘ä¸æ”¹äº•ï¼Œæ— ä¸§æ— å¾—ã€‚", "modern": "åŸºç¡€ç¨³å¥ã€‚è™½ç„¶è¡¨é¢ç¯å¢ƒåœ¨å˜ï¼Œä½†æ ¸å¿ƒæœ¬è´¨æœªå˜ã€‚å®œæ·±æŒ–æ½œåŠ›ï¼Œä¸è¦é¢‘ç¹æ›´æ¢èµ›é“ã€‚" },
  "67": { "name": "æ°´å±±è¹‡", "original": "åˆ©è¥¿å—ï¼Œä¸åˆ©ä¸œåŒ—ã€‚åˆ©è§å¤§äººã€‚", "modern": "å¯¸æ­¥éš¾è¡Œã€‚å‰æ–¹æœ‰å¤§å±±ï¼Œåæ–¹æœ‰æ·±æ°´ã€‚æ­¤æ—¶ä¸å®œç¡¬å†²ï¼Œåº”å‘è¥¿å—ï¼ˆå¹³æ˜“æ–¹å‘ï¼‰å¯»æ±‚æ´æ‰‹ã€‚" },
  "72": { "name": "å±±æ³½æŸ", "original": "å·²æ—¥ä¹ƒå­šï¼Œå…ƒå‰ï¼Œæ— å’ï¼Œå¯è´ã€‚", "modern": "å…ˆæŸåç›Šã€‚ç›®å‰å¯èƒ½éœ€è¦ç‰ºç‰²ä¸€äº›çŸ­æœŸåˆ©ç›Šæˆ–èµ„æºï¼Œä½†è¿™ä¼šä¸ºä½ èµ¢æ¥é•¿è¿œçš„ä¿¡ç”¨å’Œå›æŠ¥ã€‚" },
  "73": { "name": "å±±ç«è´²", "original": "äº¨ã€‚å°åˆ©æœ‰æ”¸å¾€ã€‚", "modern": "è£…é¥°ä¸æ–‡æ˜ã€‚é€‚åˆåšå“ç‰Œå…¬å…³ã€ç¾åŒ–å½¢è±¡ã€‚æ³¨æ„ä¸è¦åªåšè¡¨é¢æ–‡ç« ï¼Œå†…åœ¨çš„å®åŠ›æ‰æ˜¯æ ¹æœ¬ã€‚" },
  "74": { "name": "å±±é›·é¢", "original": "è´å‰ã€‚è§‚é¢ï¼Œè‡ªæ±‚å£å®ã€‚", "modern": "ä¼‘å…»ç”Ÿæ¯ã€‚å…³æ³¨å¥åº·ä¸è¨€è¯­ã€‚è¦æ³¨æ„è‡ªå·±çš„é¥®é£Ÿèµ·å±…ï¼ŒåŒæ—¶åœ¨äº‹ä¸šä¸Šè¦å¯»æ‰¾è‡ªé£Ÿå…¶åŠ›çš„æ–¹æ³•ã€‚" },
  "75": { "name": "å±±é£è›Š", "original": "å…ƒäº¨ï¼Œåˆ©æ¶‰å¤§å·ã€‚", "modern": "æ•´é¡¿å¼Šç«¯ã€‚å†…éƒ¨å·²ç»ç§¯å¼Šå·²ä¹…ï¼ˆåƒå™¨çš¿ç”Ÿè™«ï¼‰ï¼Œå¿…é¡»ä¸‹å†³å¿ƒå½»åº•æ¸…ç†æ”¹é©ï¼Œæ‰èƒ½é‡è·æ–°ç”Ÿã€‚" },
  "76": { "name": "å±±æ°´è’™", "original": "äº¨ã€‚åŒªæˆ‘æ±‚ç«¥è’™ï¼Œç«¥è’™æ±‚æˆ‘ã€‚", "modern": "å¯è’™é˜¶æ®µã€‚ä½ æˆ–ä½ çš„å›¢é˜Ÿå¯¹ç°çŠ¶è¿˜å¾ˆæ¨¡ç³Šï¼Œéœ€è¦è¯·æ•™è€å¸ˆæˆ–ä¸“å®¶ã€‚ä¿æŒè°¦è™šçš„å­¦ä¹ å¿ƒæ€æ˜¯å…³é”®ã€‚" },
  "82": { "name": "åœ°æ³½ä¸´", "original": "å…ƒäº¨åˆ©è´ã€‚è‡³äºå…«æœˆæœ‰å‡¶ã€‚", "modern": "å¥½è¿ä¸´å¤´ã€‚é¢†å¯¼åŠ›å¢å¼ºï¼Œäº‹ä¸šæœ‰å¤§è¿›å±•ã€‚ä½†è¦å±…å®‰æ€å±ï¼Œå¥½è¿ä¸ä¼šæ°¸è¿œæŒç»­ï¼Œéœ€æå‰å¸ƒå±€ã€‚" },
  "83": { "name": "åœ°ç«æ˜å¤·", "original": "åˆ©è‰°è´ã€‚", "modern": "å…‰æ˜å—æŸã€‚å¤„å¢ƒè‰°éš¾ï¼Œæ‰èƒ½è¢«æ©ç›–ã€‚æ­¤æ—¶åº”â€œæ™¦è—èªæ˜â€ï¼Œä½è°ƒè¡Œäº‹ï¼Œä¿æŠ¤å¥½è‡ªå·±çš„åˆå¿ƒã€‚" },
  "84": { "name": "åœ°é›·å¤", "original": "äº¨ã€‚å‡ºå…¥æ— ç–¾ï¼Œæœ‹æ¥æ— å’ã€‚", "modern": "ç”Ÿæœºé‡ç°ã€‚æœ€é»‘æš—çš„æ—¶æœŸå·²è¿‡ï¼Œæ–°çš„è½¬æœºå·²ç»å‡ºç°ã€‚é€‚åˆåˆ¶å®šæ–°è®¡åˆ’ï¼Œä½†è¡ŒåŠ¨è¦ç¨³å¥ã€‚" },
  "85": { "name": "åœ°é£å‡", "original": "å…ƒäº¨ã€‚åˆ©è§å¤§äººï¼Œå‹¿æ¤ã€‚å—å¾å‰ã€‚", "modern": "ç¨³æ­¥ä¸Šå‡ã€‚è¿åŠ¿æä½³ï¼Œé€‚åˆæ±‚èŒã€å‡è¿ã€‚åªè¦ç›®æ ‡æ˜ç¡®ï¼ŒåšæŒä¸æ‡ˆï¼Œå°±èƒ½è·å¾—æ˜¾è‘—æˆåŠŸã€‚" },
  "86": { "name": "åœ°æ°´å¸ˆ", "original": "è´ï¼Œä¸ˆäººå‰ï¼Œæ— å’ã€‚", "modern": "ç»Ÿå¸…ä¸ç«äº‰ã€‚é¢ä¸´é‡å¤§çš„ç«äº‰æˆ–ä»»åŠ¡ã€‚éœ€è¦ä¸¥æ˜çš„çºªå¾‹å’Œå¾·é«˜æœ›é‡çš„é¢†å¯¼è€…ï¼Œæ‰èƒ½å…‹æ•Œåˆ¶èƒœã€‚" }
        };

        function randomGua() {
            document.getElementById('num1').value = Math.floor(Math.random() * 999) + 1;
            document.getElementById('num2').value = Math.floor(Math.random() * 999) + 1;
            document.getElementById('num3').value = Math.floor(Math.random() * 999) + 1;
        }

        function getRelationship(tiElement, yongElement) {
            const relations = {
                "é‡‘": { "é‡‘": "æ¯”å’Œ", "æœ¨": "æˆ‘å…‹", "æ°´": "æˆ‘ç”Ÿ", "ç«": "å…‹æˆ‘", "åœŸ": "ç”Ÿæˆ‘" },
                "æœ¨": { "é‡‘": "å…‹æˆ‘", "æœ¨": "æ¯”å’Œ", "æ°´": "ç”Ÿæˆ‘", "ç«": "æˆ‘ç”Ÿ", "åœŸ": "æˆ‘å…‹" },
                "æ°´": { "é‡‘": "ç”Ÿæˆ‘", "æœ¨": "æˆ‘ç”Ÿ", "æ°´": "æ¯”å’Œ", "ç«": "æˆ‘å…‹", "åœŸ": "å…‹æˆ‘" },
                "ç«": { "é‡‘": "æˆ‘å…‹", "æœ¨": "ç”Ÿæˆ‘", "æ°´": "å…‹æˆ‘", "ç«": "æ¯”å’Œ", "åœŸ": "æˆ‘ç”Ÿ" },
                "åœŸ": { "é‡‘": "ç”Ÿæˆ‘", "æœ¨": "å…‹æˆ‘", "æ°´": "æˆ‘å…‹", "ç«": "ç”Ÿæˆ‘", "åœŸ": "æ¯”å’Œ" }
            };
            const rel = relations[tiElement][yongElement];
            const luckMap = {
                "ç”Ÿæˆ‘": { level: "å¤§å‰ Â· ç”¨ç”Ÿä½“", desc: "ç¯å¢ƒç”ŸåŠ©è‡ªå·±ï¼Œè°‹äº‹ææ˜“æˆåŠŸã€‚" },
                "æ¯”å’Œ": { level: "ä¸­å‰ Â· ä½“ç”¨æ¯”å’Œ", desc: "åŠ›é‡å‡è¡¡ï¼Œè¯¸äº‹å¹³é¡ºã€‚" },
                "æˆ‘å…‹": { level: "å°å‰ Â· ä½“å…‹ç”¨", desc: "è™½è¾›è‹¦åŠ³ç´¯ï¼Œä½†æœ€ç»ˆèƒ½æŒæ§å¤§å±€ã€‚" },
                "æˆ‘ç”Ÿ": { level: "å°å‡¶ Â· ä½“ç”Ÿç”¨", desc: "æ³„æ°”ä¹‹è±¡ï¼ŒæŸè€—è´¢åŠ›ç²¾åŠ›ã€‚" },
                "å…‹æˆ‘": { level: "å¤§å‡¶ Â· ç”¨å…‹ä½“", desc: "å‹åŠ›å·¨å¤§ï¼Œææ˜“å—æŸæˆ–é­é‡çªå‘é˜»ç¢ã€‚" }
            };
            return luckMap[rel];
        }

        function findGuaIdBySymbol(symbolArray) {
            for (let id in baguaData) {
                if (baguaData[id].symbol.every((val, index) => val === symbolArray[index])) return id;
            }
            return 1;
        }

        function drawGua(containerId, lowerId, upperId, activeYao = -1) {
            const container = document.getElementById(containerId);
            container.innerHTML = "";
            const fullYaos = [...baguaData[lowerId].symbol, ...baguaData[upperId].symbol];
            for (let i = 5; i >= 0; i--) {
                const div = document.createElement('div');
                div.className = `gua-line ${fullYaos[i] === 1 ? 'yang' : 'yin'} ${ (i+1) === activeYao ? 'active-yao' : ''}`;
                container.appendChild(div);
            }
            return fullYaos;
        }

        function calculate() {
            const q = document.getElementById('question').value;
            const n1 = parseInt(document.getElementById('num1').value);
            const n2 = parseInt(document.getElementById('num2').value);
            const n3 = parseInt(document.getElementById('num3').value);

            if (!q) return alert("è¯·è¾“å…¥å é—®å†…å®¹");
            if (!n1 || !n2 || !n3) return alert("è¯·è¾“å…¥å®Œæ•´æ•°å­—");

            const upId = n1 % 8 === 0 ? 8 : n1 % 8;
            const downId = n2 % 8 === 0 ? 8 : n2 % 8;
            const movingYao = n3 % 6 === 0 ? 6 : n3 % 6;

            document.getElementById('display-question').innerText = q;

            let tiId, yongId;
            if (movingYao <= 3) {
                yongId = downId; tiId = upId;
            } else {
                yongId = upId; tiId = downId;
            }

            const mainYaos = drawGua('main-gua-graph', downId, upId, movingYao);
            const mainName = baguaData[upId].name + baguaData[downId].name;
            document.getElementById('main-gua-name').innerText = mainName;
            document.getElementById('main-gua-elements').innerText = `${baguaData[upId].name}(${baguaData[upId].element}) / ${baguaData[downId].name}(${baguaData[downId].element})`;

            let changeYaos = [...mainYaos];
            changeYaos[movingYao - 1] = changeYaos[movingYao - 1] === 1 ? 0 : 1;
            const cDownId = findGuaIdBySymbol(changeYaos.slice(0, 3));
            const cUpId = findGuaIdBySymbol(changeYaos.slice(3, 6));
            drawGua('change-gua-graph', cDownId, cUpId);
            document.getElementById('change-gua-name').innerText = baguaData[cUpId].name + baguaData[cDownId].name;

            const res = getRelationship(baguaData[tiId].element, baguaData[yongId].element);
            
            document.getElementById('result').classList.remove('hidden');
            document.getElementById('luck-level').innerText = res.level;
            document.getElementById('luck-desc').innerText = res.desc;
            
            document.getElementById('analysis-tiyong').innerHTML = `
                ä½“å¦ï¼š<strong>${baguaData[tiId].name}(${baguaData[tiId].element})</strong><br>
                ç”¨å¦ï¼š<strong>${baguaData[yongId].name}(${baguaData[yongId].element})</strong><br>
                äº”è¡Œç”Ÿå…‹ï¼š<strong>${res.level.split(' Â· ')[1]}</strong>
            `;

            const mKey = `${upId}${downId}`;
            const cKey = `${cUpId}${cDownId}`;
            document.getElementById('main-original').innerText = gua64Database[mKey]?.original || "æš‚æ— åŸæ–‡è®°è½½ã€‚";
            document.getElementById('main-modern').innerText = gua64Database[mKey]?.modern || "å½“å‰ç¯å¢ƒå¤„äºç‰¹å®šçš„å˜åŠ¨ä¸­ï¼Œå»ºè®®å®¡æ…è¡Œäº‹ã€‚";
            document.getElementById('change-modern').innerText = gua64Database[cKey]?.modern || "æœªæ¥å°†å‘ç”Ÿè´¨å˜ï¼Œå˜å¦æç¤ºäº†æœ€ç»ˆèµ°å‘ï¼Œè¯·ç•™æ„ã€‚";

            window.scrollTo({ top: document.getElementById('result').offsetTop - 20, behavior: 'smooth' });
        }
    </script>
</body>
</html>
